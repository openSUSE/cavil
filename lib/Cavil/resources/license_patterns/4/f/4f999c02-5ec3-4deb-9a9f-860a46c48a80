{"license":"BSD-4-clause","opinion":0,"packname":"","patent":0,"pattern":"All rights reserved.\n\n      This software is provided \"as is,\" without warranty of any kind,\n      express or implied.  In no event shall the author or contributors\n      be held liable for any damages arising in any way from the use of\n      this software.\n\n      Permission is granted to anyone to use this software for any purpose,\n      including commercial applications, and to alter it and redistribute\n      it freely, subject to the following restrictions:\n\n      1. Redistributions of source code must retain the above copyright\n         notice, disclaimer, and this list of conditions.\n      2. Redistributions in binary form must reproduce the above copyright\n         notice, disclaimer, and this list of conditions in the documenta-\n         tion and\/or other materials provided with the distribution.\n      3. All advertising materials mentioning features or use of this\n         software must display the following acknowledgment:\n\n            This product includes software developed by Greg Roelofs\n            and contributors for the book, \"PNG: The Definitive Guide,\"\n            published by O'Reilly and Associates.\n\n  ---------------------------------------------------------------------------*\/\n\n#include <stdio.h>\n#include <stdlib.h>\n\n#include \"png.h\"        \/* libpng header; includes zlib.h *\/\n#include \"readpng.h\"    \/* typedefs, common macros, public prototypes *\/\n\n\/* future versions of libpng will provide this macro: *\/\n#ifndef png_jmpbuf\n#  define png_jmpbuf(png_ptr)   ((png_ptr)->jmpbuf)\n#endif\n\n\nstatic png_structp png_ptr = NULL;\nstatic png_infop info_ptr = NULL;\n\npng_uint_32  width, height;\nint  bit_depth, color_type;\nuch  *image_data = NULL;\n\n\nvoid readpng_version_info(void)\n{\n    fprintf(stderr, \"   Compiled with libpng %s; using libpng %s.\\n\",\n      PNG_LIBPNG_VER_STRING, png_libpng_ver);\n    fprintf(stderr, \"   Compiled with zlib %s; using zlib %s.\\n\",\n      ZLIB_VERSION, zlib_version);\n}\n\n\n\/* return value = 0 for success, 1 for bad sig, 2 for bad IHDR, 4 for no mem *\/\n\nint readpng_init(FILE *infile, ulg *pWidth, ulg *pHeight)\n{\n    uch sig[8];\n\n\n    \/* first do a quick check that the file really is a PNG image; could\n     * have used slightly more general png_sig_cmp() function instead *\/\n\n    fread(sig, 1, 8, infile","risk":3,"trademark":0,"unique_id":"4f999c02-5ec3-4deb-9a9f-860a46c48a80"}